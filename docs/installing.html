<!DOCTYPE html>
<html lang="en" prefix="og: http://ogp.me/ns# fb: https://www.facebook.com/2008/fbml">
<head>
    <title>Installing Where - Where</title>
    <!-- Using the latest rendering mode for IE -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">


    <link href="https://kartverket.github.io/where/images/favicon.ico" rel="icon">

<link rel="canonical" href="https://kartverket.github.io/where/installing.html">

        <meta name="author" content="Norwegian Mapping Authority" />
        <meta name="keywords" content="installation,python,anaconda,vlbi,where,there" />
        <meta name="description" content="Obtain and install Where on your system." />

        <meta property="og:site_name" content="Where" />
        <meta property="og:type" content="article"/>
        <meta property="og:title" content="Installing Where"/>
        <meta property="og:url" content="https://kartverket.github.io/where/installing.html"/>
        <meta property="og:description" content="Obtain and install Where on your system."/>
        <meta property="article:published_time" content="2018-06-06" />
            <meta property="article:section" content="How-to" />
            <meta property="article:tag" content="installation" />
            <meta property="article:tag" content="python" />
            <meta property="article:tag" content="anaconda" />
            <meta property="article:tag" content="vlbi" />
            <meta property="article:tag" content="where" />
            <meta property="article:tag" content="there" />
            <meta property="article:author" content="Norwegian Mapping Authority" />



    <!-- Bootstrap -->
        <link rel="stylesheet" href="https://kartverket.github.io/where/theme/css/bootstrap.cerulean.min.css" type="text/css"/>
    <link href="https://kartverket.github.io/where/theme/css/font-awesome.min.css" rel="stylesheet">

    <link href="https://kartverket.github.io/where/theme/css/pygments/native.css" rel="stylesheet">
    <link rel="stylesheet" href="https://kartverket.github.io/where/theme/css/style.css" type="text/css"/>
        <link href="https://kartverket.github.io/where/static/css/custom.css" rel="stylesheet">




</head>
<body>

<div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a href="https://kartverket.github.io/where/" class="navbar-brand">
Where            </a>
        </div>
        <div class="collapse navbar-collapse navbar-ex1-collapse">
            <ul class="nav navbar-nav">
                         <li><a href="https://kartverket.github.io/where/pages/acknowledging.html">
                             Acknowledging
                          </a></li>
                         <li><a href="https://kartverket.github.io/where/pages/contact.html">
                             Contact
                          </a></li>
                        <li >
                            <a href="https://kartverket.github.io/where/category/download.html">Download</a>
                        </li>
                        <li class="active">
                            <a href="https://kartverket.github.io/where/category/how-to.html">How-to</a>
                        </li>
            </ul>
            <ul class="nav navbar-nav navbar-right">
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
</div> <!-- /.navbar -->

<!-- Banner -->
<!-- End Banner -->

<!-- Content Container -->
<div class="container">
    <div class="row">
        <div class="col-sm-9">
    <section id="content">
        <article>
            <header class="page-header">
                <h1>
                    <a href="https://kartverket.github.io/where/installing.html"
                       rel="bookmark"
                       title="Permalink to Installing Where">
                        Installing Where
                    </a>
                </h1>
            </header>
            <div class="entry-content">
                <div class="panel">
                    <div class="panel-body">
<footer class="post-info">
    <span class="label label-default">Date</span>
    <span class="published">
        <i class="fa fa-calendar"></i><time datetime="2018-06-06T00:00:00+02:00"> on. 06 juni 2018</time>
    </span>





<span class="label label-default">Tags</span>
	<a href="https://kartverket.github.io/where/tag/installation.html">installation</a>
        /
	<a href="https://kartverket.github.io/where/tag/python.html">python</a>
        /
	<a href="https://kartverket.github.io/where/tag/anaconda.html">anaconda</a>
        /
	<a href="https://kartverket.github.io/where/tag/vlbi.html">vlbi</a>
        /
	<a href="https://kartverket.github.io/where/tag/where.html">where</a>
        /
	<a href="https://kartverket.github.io/where/tag/there.html">there</a>
    
</footer><!-- /.post-info -->                    </div>
                </div>
                <p>These instructions are written for installation on a Linux system. Where also works with Windows, 
but is a lot tested on this platform and no instructions are provided. </p>
<h2 id="download-where">Download Where</h2>
<p>In order to install Where, you first need to download it. Please
<a href="where-latest.html">Download the latest version of Where</a>, and unpack it at a
convenient location on your computer.</p>
<p>All commands shown in this guide should be performed in a terminal from inside
the <code>where</code>-directory you just downloaded and unpacked.</p>
<h2 id="prerequisites">Prerequisites</h2>
<p>The Where software is mainly written in Python. As such, it is dependent on
having a modern Python (&gt;= 3.6) installed on your system, including several
packages from the scientific stack. Where also utilizes
<a href="http://cython.org/">Cython</a> (essentially a Python-to-C-translator) for better
performance. Finally, Where depends on some Fortran libraries with community
implementations of conventional models.</p>
<h3 id="step-1-install-anaconda-python">Step 1: Install Anaconda Python</h3>
<p>We recommend using
<a href="https://www.anaconda.com/download"><strong>Anaconda Python</strong></a>. This is a Python
distribution that comes with its own package manager
(<a href="https://conda.io/">conda</a>) that makes it easier to install other Python
packages, especially on Windows.</p>
<p>An alternative distribution of Anaconda is
<a href="https://conda.io/miniconda.html"><strong>Miniconda</strong></a>. It comes with the same Conda
package manager, but only installs a minimal Python system by default. As such
Miniconda is a great choice for instance on servers.</p>
<p>Install Anaconda or Miniconda following the instructions on their respective web
pages.</p>
<h3 id="step-2-install-necessary-python-dependencies">Step 2: Install Necessary Python Dependencies</h3>
<p>Once Anaconda or Miniconda is installed, you should install the Python packages
needed by Where by doing:</p>
<pre><code>conda env update -f environment.yml
</code></pre>
<h3 id="step-3-install-a-fortran-compiler">Step 3: Install a Fortran Compiler</h3>
<p>For Linux <code>gfortran</code> is needed.</p>
<h3 id="step-4-install-a-c-compiler">Step 4: Install a C Compiler</h3>
<p>For Linux <code>gcc</code> is needed.</p>
<h3 id="step-5-other-dependencies">Step 5: Other dependencies</h3>
<p>For Linux the following packages are needed:</p>
<ul>
<li>patch</li>
</ul>
<h2 id="installing-where">Installing Where</h2>
<p>The actual installation of Where happens in three steps:</p>
<ul>
<li>Compile the external Fortran libraries and build them as a Python module using
  <a href="https://docs.scipy.org/doc/numpy/f2py/"><code>f2py</code></a>.</li>
<li>Compile and build the Cython code.</li>
<li>Install Where on your computer.</li>
</ul>
<p>All these three steps are carried out automatically by running the Make-command:</p>
<pre><code>make
</code></pre>
<p>You can confirm that the installation succeeded by asking for help about Where:</p>
<pre><code>where -h
</code></pre>
<p>If you get an error saying that Where is an unknown command, you most likely
need to add Where to your path.</p>
<blockquote>
<p><strong>Note:</strong> On Windows the command to start Where is <code>gd_where</code>. In the example
above you should run <code>gd_where -h</code>.</p>
</blockquote>
<h2 id="set-up-paths-used-by-where">Set Up Paths Used by Where</h2>
<p>Where uses a few different directories. The location of these are controlled by
the Where configuration. You should create a new text file called
<code>where_local.conf</code> inside the <code>where/config</code> directory.</p>
<p>Add the following contents and save the file:</p>
<pre><code>[path]
data     = ~/where_data
work     = ~/where_work
log      = ~/where_log
publish  = ~/where_publish
</code></pre>
<p>This specifies the location of four different directories:</p>
<ul>
<li><code>data</code>: The data directory will contain all data needed to analyze a session,
  including observation files, reference frames, and a priori model information.</li>
<li><code>work</code>: The work directory will contain all active analysis files, including
  configuration, analysis <a href="https://kartverket.github.io/where/the-where-software.html#dataset">datasets</a> and
  output products.</li>
<li><code>log</code>: The log directory will contain log files with information from
  <a href="https://kartverket.github.io/where/running-where.html#running-many-analyses">running many Where analyses</a>. Log
  files for single sessions are stored in their respective directories inside
  the <code>work</code> directory.</li>
<li><code>publish</code>: It is possible to publish some of the result files. Publishing a
  file simply means that it will be copied to some location within the publish
  directory.</li>
</ul>
<p>Using the default above, these directories are created as four separate
directories named <code>where_data</code>, <code>where_work</code>, <code>where_publish</code>, and <code>where_log</code>
inside your home directory. Feel free to change these according to your taste.</p>
<h2 id="obtaining-data-files">Obtaining data files</h2>
<p>Where has functionality for automatically downloading the data files that it
needs when it is running.</p>
<p>You should however download the observation files you want to analyze
separately. In the example below we assume that you specified the <code>data</code>
directory to be <code>~/where_data/</code>. Change the path if you specified a different
<code>data</code> directory above:</p>
<h3 id="analyzing-vgosdb-format">Analyzing vgosDB Format</h3>
<p>The following downloads the observation file for January 2nd 2018:</p>
<pre><code>mkdir -p ~/where_data/vlbi/obs/vgosdb/2018 
cd ~/where_data/vlbi/obs/vgosdb/2018 
wget https://cddis.gsfc.nasa.gov/pub/vlbi/ivsdata/vgosdb/2018/18JAN02XA.tgz
tar -xvf 18JAN02XA.tgz
</code></pre>
<p>You can then analyze this file by running:</p>
<pre><code>where 2018 1 2 --vlbi --session_code=R1823
</code></pre>
<h3 id="analyzing-ngs-format">Analyzing NGS Format</h3>
<blockquote>
<p><strong>Note:</strong> New NGS files are no longer produced and the recommended file format for observations files is vgosDB.</p>
</blockquote>
<p>The following downloads the observation file for January 2nd 2018:</p>
<pre><code>mkdir -p ~/where_data/vlbi/obs/ngs/2018 
cd ~/where_data/vlbi/obs/ngs/2018 
wget https://cddis.gsfc.nasa.gov/pub/vlbi/ivsdata/ngs/2018/18JAN02XA_N004.gz
</code></pre>
<p>You can then analyze this file by running:</p>
<pre><code>where 2018 1 2 --vlbi --session_code=R1823 --obs_format=ngs
</code></pre>
<h3 id="other-files">Other files</h3>
<p>Where will automatically try to download a version of all other files needed to do an analysis. This is to facilitate 
an easy setup for beginners. However, some sites requires a personal account to be able to download the necessary 
files. One example is files from <a href="https://cddis.nasa.gov/">CDDIS</a>. Where will give an error message if any files are 
missing when running the progam. Investigate these error messages, create
personal accounts when needed and download the missing files. Some files also need to be updated routinely, for 
instance files with Earth Orientation Parameters. These will not be updated automatically. See <code>config/files.conf</code> 
and <code>config/files_pipeline_vlbi.conf</code> for information about files used by Where. </p>
<h2 id="external-libraries">External libraries</h2>
<p>Where depends on three external libraries that are not included in the
download. These are all available online and have already been downloaded
automatically by the <code>make</code>-process.</p>
<h3 id="sofa">SOFA</h3>
<p>The
<a href="https://www.iausofa.org/">SOFA (Standards of Fundamental Astronomy) software library</a>
is used for fundamental astronomy calculations, such as Celestial to Terrestrial
transformations.</p>
<p>The latest version of the library should be downloaded from
<a href="http://www.iausofa.org/current_F.html">the SOFA web page</a> and stored in the
<code>external/sofa/</code> directory. This can be done automatically by running</p>
<pre><code>python download.py sofa
</code></pre>
<p>The library depends on a catalog of leap seconds, and should be updated regularly.</p>
<h3 id="iers-software">IERS software</h3>
<p>In companionship with the IERS Convention 2010, the IERS has made available
implementations of several conventional models. Where uses these models directly
whenever possible.</p>
<p>The latest version of the library should be downloaded from
<a href="http://iers-conventions.obspm.fr/2010/2010_update/">the IERS web page</a> and
stored in the <code>external/iers/</code> directory. This can be done automatically by
running</p>
<pre><code>python download.py iers_2010
</code></pre>
<p>The library depends on a catalog of leap seconds, and should be updated regularly.
Before compilation of the iers_2010 library some of the source code and make files
needs to be patched. Therefore, make sure <code>patch</code> (Linux) is installed. </p>
<h3 id="gpt2w">GPT2w</h3>
<p>One of the available troposphere models in Where is the GPT2w. This is
implemented using the
<a href="http://ggosatm.hg.tuwien.ac.at/DELAY/SOURCE/GPT2w/">original GPT2w model</a> by
<a href="https://doi.org/10.1007/s10291-014-0403-7"><em>Böhm, J., Möller, G., Schindelegger, M. et al. GPS Solut (2015) 19: 433.</em></a></p>
<p>The latest version of the Fortran library should be downloaded from
<a href="http://ggosatm.hg.tuwien.ac.at/DELAY/SOURCE/GPT2w/">the GPT2w web page</a> and
stored in the <code>external/gpt2w/</code> directory. This can be done automatically by
running</p>
<pre><code>python download.py gpt2w
</code></pre>
<h3 id="high-frequency-eop-software">High Frequency EOP software</h3>
<p>A IERS working group on Diurnal and Semi-dirunal EOP Variations has made some software and models available at
https://ivscc.gsfc.nasa.gov/hfeop_wg/.</p>
<p>The latest version of the Fortran library should be downloaded from
<a href="https://ivscc.gsfc.nasa.gov/hfeop_wg/">the working group web page</a> and
stored in the <code>external/iers/hf_eop/</code> directory. This can be done automatically by
running</p>
<pre><code>python download.py hf_eop
</code></pre>
            </div>
            <!-- /.entry-content -->
        </article>
    </section>

        </div>
        <div class="col-sm-3" id="sidebar">
            <aside>
<!-- Sidebar -->
<section class="well well-sm">
  <ul class="list-group list-group-flush">

<!-- Sidebar/Social -->
<li class="list-group-item">
  <h4><i class="fa fa-home fa-lg"></i><span class="icon-label">Social</span></h4>
  <ul class="list-group" id="social">
    <li class="list-group-item"><a href="https://github.com/kartverket/where"><i class="fa fa-github-square fa-lg"></i> github</a></li>
  </ul>
</li>
<!-- End Sidebar/Social -->

<!-- Sidebar/Links -->
<li class="list-group-item">
  <h4><i class="fa fa-external-link-square fa-lg"></i><span class="icon-label">Links</span></h4>
  <ul class="list-group" id="links">
    <li class="list-group-item">
      <a href="https://github.com/kartverket/midgard" target="_blank">Midgard</a>
    </li>
    <li class="list-group-item">
      <a href="https://www.anaconda.com/download" target="_blank">Anaconda Python</a>
    </li>
    <li class="list-group-item">
      <a href="https://ivscc.gsfc.nasa.gov/" target="_blank">International VLBI Service</a>
    </li>
    <li class="list-group-item">
      <a href="https://www.iers.org/IERS/EN/Publications/TechnicalNotes/tn36.html" target="_blank">IERS Conventions 2010</a>
    </li>
  </ul>
</li>
<!-- End Sidebar/Links -->
  </ul>
</section>
<!-- End Sidebar -->            </aside>
        </div>
    </div>
</div>
<!-- End Content Container -->

<footer>
   <div class="container">
      <hr>
      <div class="row">
         <div class="col-xs-10">&copy; 2023 Norwegian Mapping Authority
            &middot; Powered by <a href="https://github.com/getpelican/pelican-themes/tree/master/pelican-bootstrap3" target="_blank">pelican-bootstrap3</a>,
            <a href="http://docs.getpelican.com/" target="_blank">Pelican</a>,
            <a href="http://getbootstrap.com" target="_blank">Bootstrap</a>         </div>
         <div class="col-xs-2"><p class="pull-right"><i class="fa fa-arrow-up"></i> <a href="#">Back to top</a></p></div>
      </div>
   </div>
</footer>
<script src="https://kartverket.github.io/where/theme/js/jquery.min.js"></script>

<!-- Include all compiled plugins (below), or include individual files as needed -->
<script src="https://kartverket.github.io/where/theme/js/bootstrap.min.js"></script>

<!-- Enable responsive features in IE8 with Respond.js (https://github.com/scottjehl/Respond) -->
<script src="https://kartverket.github.io/where/theme/js/respond.min.js"></script>


    <script src="https://kartverket.github.io/where/theme/js/bodypadding.js"></script>


</body>
</html>